//コメント投稿
  $(document).on("click",'.submit',function() {
    var aid = this.id;
    var commentInput = ':text[name="' + aid + '"]';
    var comment = $(commentInput).val();
    var uid = <?php echo $uid;?>;
    postComment(aid,comment,uid);
  });
  $(document).on('keypress','.form-control',function (e) {
    if(e.keyCode == 13) {
      var aid = this.name;
      var commentInput = ':text[name="' + aid + '"]';
      var comment = $(commentInput).val();
      var uid = <?php echo $uid;?>;
      postComment(aid,comment,uid);
      e.preventDefault();
    }                                               
  });
  function postComment(aid,comment,uid){
    $.ajax({
        url: 'post_comment.php',
        type:'POST',
        dataType: 'json',
        data : {aid : aid, uid : uid, comment : comment },
        timeout:10000,
        success: function(data) {
          var commentAreaId = "comment_aid_" + aid;
          var element = document.createElement('div'); 
          element.id = "comment_cid_" + data.cid;
          var deleteBtn = "<span id='" + data.cid + "' class='delete glyphicon glyphicon-remove-circle' aria-hidden='true'></span>"; 
          var content = "<img src='https://graph.facebook.com/" + uid + "/picture' class='img-rounded' alt=''>";
          var postComment = "<span id='comment_body_cid_" + data.cid + "'>" + comment + "</span>";
          element.innerHTML = content + postComment + deleteBtn; 
          var objTextarea = document.getElementById(commentAreaId);
          objTextarea.appendChild(element);
          $('input').val('');
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
          alert("エラー");
        }
    });
//コメント削除
  $(document).on("click",'.delete',function() {
    var cid = this.id;
    var uid = <?php echo $uid;?>;
    if(window.confirm('削除しますか？')){
      $.ajax({
          url: 'delete_comment.php',
          type:'POST',
          dataType: 'json',
          data : {cid: cid, uid : uid},
          timeout:10000,
          success: function(data) {
            var id = "comment_cid_" + cid;
            document.getElementById(id).remove();
          },
          error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert("エラー");
          }
      });
    }
  });
//詳細ポップアップ
$(document).on("click",'.specific',function() {
  var aid = this.id;
  var id = "specific_" + aid; 
  $.ajax({
    url: "get_article.php",
    type:'GET',
    dataType: 'json',
    data : {relID : aid},
    async: false,
    timeout:10000,
    success: function(data) {
      var article = data;
      var element = document.createElement('div'); 
      element.id = "article_" + aid;
      element.innerHTML = article; 
      element.style.margin = "20px"; 
      element.style.height = "550px"; 
      var objTextarea = document.getElementById(id); 
      objTextarea.appendChild(element); 
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {
      alert("エラー");
    }
  });
});